From 4245ba41752717e208620ca8f629b7d8e43a9cb0 Mon Sep 17 00:00:00 2001
From: Madhu <enometh@net.meer>
Date: Thu, 26 May 2022 11:39:20 +0530
Subject: [PATCH 3/8] xpra/sound/src.py: fix monitor_devices is a dict, not an
 array

---
 xpra/audio/src.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/xpra/audio/src.py b/xpra/audio/src.py
index 1d91441ac..4317e6d09 100755
--- a/xpra/audio/src.py
+++ b/xpra/audio/src.py
@@ -59,14 +59,14 @@ class AudioSource(AudioPipeline):
             except ImportError as e:
                 log.warn("Warning: pulseaudio is not available!")
                 log.warn(" %s", e)
-                monitor_devices = []
+                monitor_devices = {}
             if not monitor_devices:
                 log.warn("could not detect any pulseaudio monitor devices")
                 log.warn(" a test source will be used instead")
                 src_type = "audiotestsrc"
                 default_src_options = {"wave":2, "freq":100, "volume":0.4}
             else:
-                monitor_device = monitor_devices.items()[0][0]
+                monitor_device = list(monitor_devices.items())[0][0].decode("utf-8")
                 log.info("using pulseaudio source device:")
                 log.info(" '%s'", monitor_device)
                 src_type = "pulsesrc"
-- 
2.49.0.9.gd50a5e8939.dirty

